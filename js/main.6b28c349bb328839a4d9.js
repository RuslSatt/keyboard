(()=>{"use strict";const e=[{code:"Backquote",ru:"ё",en:"`",shiftRu:"Ё",shiftEn:"~"},{code:"Digit1",ru:"1",en:"1",shiftRu:"!",shiftEn:"!"},{code:"Digit2",ru:"2",en:"2",shiftRu:'"',shiftEn:"@"},{code:"Digit3",ru:"3",en:"3",shiftRu:"№",shiftEn:"#"},{code:"Digit4",ru:"4",en:"4",shiftRu:";",shiftEn:"$"},{code:"Digit5",ru:"5",en:"5",shiftRu:"%",shiftEn:"%"},{code:"Digit6",ru:"6",en:"6",shiftRu:":",shiftEn:"^"},{code:"Digit7",ru:"7",en:"7",shiftRu:"?",shiftEn:"&"},{code:"Digit8",ru:"8",en:"8",shiftRu:"*",shiftEn:"*"},{code:"Digit9",ru:"9",en:"9",shiftRu:"(",shiftEn:"("},{code:"Digit0",ru:"0",en:"0",shiftRu:")",shiftEn:")"},{code:"Minus",ru:"-",en:"-",shiftRu:"_",shiftEn:"_"},{code:"Equal",ru:"=",en:"=",shiftRu:"+",shiftEn:"+"},{code:"Backspace",ru:"Backspace",en:"Backspace",shiftRu:"Backspace",shiftEn:"Backspace",br:!0},{code:"Tab",ru:"Tab",en:"Tab",shiftRu:"Tab",shiftEn:"Tab"},{code:"KeyQ",ru:"й",en:"q",shiftRu:"Й",shiftEn:"Q"},{code:"KeyW",ru:"ц",en:"w",shiftRu:"Ц",shiftEn:"W"},{code:"KeyE",ru:"у",en:"e",shiftRu:"У",shiftEn:"E"},{code:"KeyR",ru:"к",en:"r",shiftRu:"К",shiftEn:"R"},{code:"KeyT",ru:"е",en:"t",shiftRu:"Е",shiftEn:"T"},{code:"KeyY",ru:"н",en:"y",shiftRu:"Н",shiftEn:"Y"},{code:"KeyU",ru:"г",en:"u",shiftRu:"Г",shiftEn:"U"},{code:"KeyI",ru:"ш",en:"i",shiftRu:"Ш",shiftEn:"I"},{code:"KeyO",ru:"щ",en:"o",shiftRu:"Щ",shiftEn:"O"},{code:"KeyP",ru:"з",en:"p",shiftRu:"З",shiftEn:"P"},{code:"BracketLeft",ru:"х",en:"[",shiftRu:"Х",shiftEn:"{"},{code:"BracketRight",ru:"ъ",en:"]",shiftRu:"Ъ",shiftEn:"}"},{code:"Backslash",ru:"\\",en:"\\",shiftRu:"/",shiftEn:"|"},{code:"Delete",ru:"Del",en:"Del",shiftRu:"Del",shiftEn:"Del",br:!0},{code:"CapsLock",ru:"CapsLk",en:"CapsLk",shiftRu:"CapsLk",shiftEn:"CapsLk"},{code:"KeyA",ru:"ф",en:"a",shiftRu:"Ф",shiftEn:"A"},{code:"KeyS",ru:"ы",en:"s",shiftRu:"Ы",shiftEn:"S"},{code:"KeyD",ru:"в",en:"d",shiftRu:"В",shiftEn:"D"},{code:"KeyF",ru:"а",en:"f",shiftRu:"А",shiftEn:"F"},{code:"KeyG",ru:"п",en:"g",shiftRu:"П",shiftEn:"G"},{code:"KeyH",ru:"р",en:"h",shiftRu:"Р",shiftEn:"H"},{code:"KeyJ",ru:"о",en:"j",shiftRu:"О",shiftEn:"J"},{code:"KeyK",ru:"л",en:"k",shiftRu:"Л",shiftEn:"K"},{code:"KeyL",ru:"д",en:"l",shiftRu:"Д",shiftEn:"L"},{code:"Semicolon",ru:"ж",en:";",shiftRu:"Ж",shiftEn:":"},{code:"Quote",ru:"э",en:"'",shiftRu:"Э",shiftEn:'"'},{code:"Enter",ru:"Enter",en:"Enter",shiftRu:"Enter",shiftEn:"Enter",br:!0},{code:"ShiftLeft",ru:"Shift",en:"Shift",shiftRu:"Shift",shiftEn:"Shift"},{code:"KeyZ",ru:"я",en:"z",shiftRu:"Я",shiftEn:"Z"},{code:"KeyX",ru:"ч",en:"x",shiftRu:"Ч",shiftEn:"X"},{code:"KeyC",ru:"с",en:"c",shiftRu:"С",shiftEn:"C"},{code:"KeyV",ru:"м",en:"v",shiftRu:"М",shiftEn:"V"},{code:"KeyB",ru:"и",en:"b",shiftRu:"И",shiftEn:"B"},{code:"KeyN",ru:"т",en:"n",shiftRu:"Т",shiftEn:"N"},{code:"KeyM",ru:"ь",en:"m",shiftRu:"Ь",shiftEn:"M"},{code:"Comma",ru:"б",en:",",shiftRu:"Б",shiftEn:"<"},{code:"Period",ru:"ю",en:".",shiftRu:"Ю",shiftEn:">"},{code:"Slash",ru:".",en:"/",shiftRu:",",shiftEn:"?"},{code:"ArrowUp",ru:"▲",en:"▲",shiftRu:"▲",shiftEn:"▲"},{code:"ShiftRight",ru:"Shift",en:"Shift",shiftRu:"Shift",shiftEn:"Shift",br:!0},{code:"ControlLeft",ru:"Ctrl",en:"Ctrl",shiftRu:"Ctrl",shiftEn:"Ctrl"},{code:"AltLeft",ru:"Alt",en:"Alt",shiftRu:"Alt",shiftEn:"Alt"},{code:"Space",ru:"Space",en:"Space",shiftRu:"Space",shiftEn:"Space"},{code:"AltRight",ru:"Alt",en:"Alt",shiftRu:"Alt",shiftEn:"Alt"},{code:"ControlRight",ru:"Ctrl",en:"Ctrl",shiftRu:"Ctrl",shiftEn:"Ctrl"},{code:"ArrowLeft",ru:"◄",en:"◄",shiftRu:"◄",shiftEn:"◄"},{code:"ArrowDown",ru:"▼",en:"▼",shiftRu:"▼",shiftEn:"▼"},{code:"ArrowRight",ru:"►",en:"►",shiftRu:"►",shiftEn:"►"},{code:"Lang",ru:"RU",en:"EN",shiftRu:"RU",shiftEn:"EN"}];function t(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=new(function(){function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.elements={keyboard:null,keyboardContainer:null,area:null,keysAll:[]},this.value="",this.keys=e,this.isCaps=!1,this.isShift=!1,this.lang="ru",this.activeCaps=!1,this.activeCapsDown=!1,this.langFlag=!1,this.crtlActive=!1,this.onShift=!1}var i,n,a;return i=s,(n=[{key:"init",value:function(){this.getLocalStorage(),this.elements.keyboard=document.createElement("div"),this.elements.keyboardContainer=document.createElement("div"),this.elements.keyboard.classList.add("keyboard"),this.elements.keyboardContainer.classList.add("keyboard__container"),document.body.append(this.elements.keyboard),this.elements.keyboardContainer.append(this.render()),this.elements.keyboard.append(this.elements.keyboardContainer),this.elements.keysAll=document.querySelectorAll(".keyboard__key"),this.elements.area=document.querySelector("textarea"),this.elements.area.value=this.value}},{key:"render",value:function(){var e=this,t=document.createDocumentFragment();return document.addEventListener("pointerdown",(function(t){t.target.classList.contains("keyboard__key")&&(t.preventDefault(),t.target.classList.add("active")),t.target.classList.contains("backspace")?e.backspaceEvent():t.target.classList.contains("tab")?e.tabEvent():t.target.classList.contains("caps")?(e.activeCaps=!e.activeCaps,e.activeCaps?t.target.classList.add("active"):t.target.classList.remove("active"),e.capsLock()):t.target.classList.contains("enter")?e.enterEvent():t.target.classList.contains("space")?e.spaceEvent():t.target.classList.contains("lang")?e.changeLang():t.target.classList.contains("delete")&&e.deleteEvent()})),this.keys.forEach((function(s){var i=document.createElement("button");switch(i.classList.add("keyboard__key"),i.setAttribute("data-code","".concat(s.code)),"ru"===e.lang?i.innerHTML=s.ru:i.innerHTML=s.en,t.append(i),document.addEventListener("pointerup",(function(){i.classList.contains("caps")||i.classList.contains("shift_left")||i.classList.contains("shift_right")||i.classList.remove("active")})),s.code){case"Backspace":i.classList.add("backspace");break;case"Tab":i.classList.add("tab");break;case"CapsLock":i.classList.add("caps");break;case"Enter":i.classList.add("enter");break;case"ShiftLeft":i.classList.add("shift_left"),e.shiftEvent(i);break;case"ShiftRight":i.classList.add("shift_right"),e.shiftEvent(i);break;case"Space":i.classList.add("space");break;case"Lang":i.classList.add("lang");break;case"Delete":i.classList.add("delete");break;default:i.addEventListener("pointerdown",(function(){var t=e.elements.area,i=t.selectionStart,n=t.selectionEnd,a=function(t){e.value=e.value.substring(0,i)+t+e.value.substring(n)};1===s.shiftRu.length&&1===s.ru.length&&("ru"===e.lang?e.isCaps?e.isShift?a(s.shiftRu.toLowerCase()):a(s.ru.toUpperCase()):e.isShift?a(s.shiftRu):a(s.ru):e.isCaps?e.isShift?a(s.shiftEn.toLowerCase()):a(s.en.toUpperCase()):e.isShift?a(s.shiftEn):a(s.en)),e.setValue(),t.focus(),t.selectionEnd=i===n?n+1:n})),i.setAttribute("data-code","".concat(s.code))}if(s.br){var n=document.createElement("br");t.append(n)}})),t}},{key:"changeLang",value:function(){"ru"===this.lang?this.lang="en":this.lang="ru",this.setLocalStorage(),"en"===this.lang?this.isCaps?(this.lowerCaseEn(),this.isCaps=!1,this.capsLock()):this.lowerCaseEn():this.isCaps?(this.lowerCaseRu(),this.isCaps=!1,this.capsLock()):this.lowerCaseRu()}},{key:"setValue",value:function(){this.elements.area.value=this.value}},{key:"tabEvent",value:function(){var e=this.elements.area,t=e.selectionStart,s=e.selectionEnd;this.value=this.value.substring(0,t)+"\t"+this.value.substring(s),this.setValue(),e.focus(),e.selectionEnd=s+1}},{key:"deleteEvent",value:function(){var e=this.elements.area,t=e.selectionStart,s=e.selectionEnd;this.value=this.value.substring(0,t)+this.value.substring(s+1),this.setValue(),e.focus(),e.selectionEnd=s}},{key:"backspaceEvent",value:function(){var e=this.elements.area,t=e.selectionStart,s=e.selectionEnd;this.value=this.value.substring(0,t>0&&t===s?t-1:t)+this.value.substring(s),this.setValue(),e.focus(),e.selectionEnd=t>0&&t===s?s-1:t}},{key:"enterEvent",value:function(){var e=this.elements.area,t=e.selectionStart,s=e.selectionEnd;this.value=this.value.substring(0,t)+"\n"+this.value.substring(s),this.setValue(),e.focus(),e.selectionEnd=s+1}},{key:"spaceEvent",value:function(){var e=this.elements.area,t=e.selectionStart,s=e.selectionEnd;this.value=this.value.substring(0,t)+" "+this.value.substring(s),this.setValue(),e.focus(),e.selectionEnd=s+1}},{key:"shiftEvent",value:function(e){var t=this;e.addEventListener("pointerdown",(function(){e.classList.add("active"),t.isShift=!0,t.shift()})),e.addEventListener("pointerup",(function(){e.classList.remove("active"),t.isShift=!1,t.shift()})),e.addEventListener("pointerleave",(function(){t.onShift||(e.classList.remove("active"),t.isShift=!1,t.shift())}))}},{key:"upperCaseRu",value:function(){var e=this;this.keys.forEach((function(t,s){e.elements.keysAll[s].innerText=t.shiftRu}))}},{key:"upperCaseText",value:function(){this.elements.keysAll.forEach((function(e){1===e.innerText.length&&(e.innerText=e.innerText.toUpperCase())}))}},{key:"lowerCaseText",value:function(){this.elements.keysAll.forEach((function(e){1===e.innerText.length&&(e.innerText=e.innerText.toLowerCase())}))}},{key:"upperCaseEn",value:function(){var e=this;this.keys.forEach((function(t,s){e.elements.keysAll[s].innerText=t.shiftEn}))}},{key:"lowerCaseRu",value:function(){var e=this;this.keys.forEach((function(t,s){e.elements.keysAll[s].innerText=t.ru}))}},{key:"lowerCaseEn",value:function(){var e=this;this.keys.forEach((function(t,s){e.elements.keysAll[s].innerText=t.en}))}},{key:"capsLock",value:function(){var e=this;this.isCaps?this.isCaps=!1:this.isCaps=!0,this.elements.keysAll.forEach((function(t){1===t.innerText.length&&(e.isCaps&&e.isShift||!e.isCaps&&!e.isShift?t.innerText=t.innerText.toLowerCase():(e.isCaps&&!e.isShift||!e.isCaps&&e.isShift)&&(t.innerText=t.innerText.toUpperCase()))}))}},{key:"shift",value:function(){this.isCaps?this.isShift?"ru"===this.lang?(this.upperCaseRu(),this.lowerCaseText()):(this.upperCaseEn(),this.lowerCaseText()):"ru"===this.lang?(this.lowerCaseRu(),this.upperCaseText()):(this.lowerCaseEn(),this.upperCaseText()):this.isShift?"ru"===this.lang?this.upperCaseRu():this.upperCaseEn():"ru"===this.lang?this.lowerCaseRu():this.lowerCaseEn()}},{key:"keyPress",value:function(){var e=this;document.addEventListener("keypress",(function(t){var s=e.elements.area,i=s.selectionStart,n=s.selectionEnd;t.preventDefault(),e.elements.keysAll.forEach((function(a){a.dataset.code===t.code&&(a.classList.add("active"),e.value=e.value.substring(0,i)+a.innerText+e.value.substring(n),e.setValue(),s.focus(),s.selectionEnd=i===n?n+1:n)}))}))}},{key:"keyDown",value:function(){var e=this;document.addEventListener("keydown",(function(t){e.elements.keysAll.forEach((function(e){t.code===e.dataset.code&&e.classList.add("active")})),"CapsLock"===t.code?(t.preventDefault(),e.activeCapsDown||(e.capsLock(),e.activeCapsDown=!0)):"ShiftLeft"===t.code||"ShiftRight"===t.code?(t.preventDefault(),e.onShift=!0,e.isShift=!0,e.shift()):"Enter"===t.code?(t.preventDefault(),e.enterEvent()):"Space"===t.code?(t.preventDefault(),e.spaceEvent()):"AltLeft"===t.code?(t.preventDefault(),e.langFlag=!0):"AltRight"===t.code?t.preventDefault():"ControlLeft"===t.code?(t.preventDefault(),e.crtlActive||e.langFlag&&(e.changeLang(),e.crtlActive=!0)):"Backspace"===t.code?(t.preventDefault(),e.backspaceEvent()):"Delete"===t.code?(t.preventDefault(),e.deleteEvent()):"Tab"===t.code&&(t.preventDefault(),e.tabEvent())}))}},{key:"keyUp",value:function(){var e=this;document.addEventListener("keyup",(function(t){if(e.elements.keysAll.forEach((function(e){t.code===e.dataset.code&&e.classList.remove("active")})),"ShiftLeft"===t.code||"ShiftRight"===t.code?(e.onShift=!1,e.isShift=!1,e.shift()):"AltLeft"===t.code?e.langFlag=!1:"ControlLeft"===t.code&&(e.crtlActive=!1),"CapsLock"===t.code){var s=document.querySelector(".caps");e.activeCapsDown=!1,e.activeCaps=!e.activeCaps,e.activeCaps?s.classList.add("active"):s.classList.remove("active")}}))}},{key:"setLocalStorage",value:function(){localStorage.setItem("lang",this.lang)}},{key:"getLocalStorage",value:function(){localStorage.getItem("lang")&&(this.lang=localStorage.getItem("lang"))}}])&&t(i.prototype,n),a&&t(i,a),Object.defineProperty(i,"prototype",{writable:!1}),s}());window.addEventListener("DOMContentLoaded",(function(){s.init(),s.keyDown(),s.keyUp(),s.keyPress()}))})();